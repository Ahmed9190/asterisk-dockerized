# Coturn 4.7 Compatible Configuration
# Simplified - removed unsupported options

#==============================================================================
# Listener Configuration
#==============================================================================
listening-port=3478
tls-listening-port=5349
listening-ip=0.0.0.0

#==============================================================================
# Relay Configuration
#==============================================================================
min-port=49152
max-port=49200

fingerprint
lt-cred-mech
realm=asterisk.local

#==============================================================================
# User Credentials
#==============================================================================
user=turnuser:TurnPassword123
user=webrtc:WebRtcTurn456
user=intercom:IntercomTurn789

#==============================================================================
# Security
#==============================================================================
# TCP relay disabled
no-tcp-relay

# Multicast disabled
no-multicast-peers

# Private IP blacklist
denied-peer-ip=0.0.0.0-0.255.255.255
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=127.0.0.0-127.255.255.255

#==============================================================================
# Rate Limiting
#==============================================================================
max-bps=3000000
user-quota=12
total-quota=1200

#==============================================================================
# TLS Configuration
#==============================================================================
cert=/etc/coturn/certs/asterisk-cert.pem
pkey=/etc/coturn/certs/asterisk-key.pem

# Removed unsupported options:
# - no-tlsv1 (not recognized by 4.7-alpine)
# - no-tlsv1_1 (not recognized by 4.7-alpine)
# - no-loopback-peers (not recognized by 4.7-alpine)
# - prod (not recognized by 4.7-alpine)

#==============================================================================
# Optimization
#==============================================================================
no-cli
mobility

